{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Persons.js","service/persons.js","components/Notification.js","App.js","index.js"],"names":["Filter","props","onChange","onFilter","PersonForm","onSubmit","addName","value","newName","handleNewName","newNumber","handleNewNumber","type","Person","person","deletePerson","name","number","onClick","Persons","filterToShow","deletePersonOf","map","id","baseUrl","axios","get","then","response","data","newPerson","post","delete","put","Notification","message","color","style","background","fontSize","borderStyle","borderRadius","padding","marginBottom","App","useState","persons","setPersons","setNewName","setNewNumber","setFilterToShow","setMessage","useEffect","personsService","event","target","str","toLowerCase","newFilterToShow","filter","indexOf","preventDefault","checkExistedName","some","window","alert","oldPerson","find","newPersons","setTimeout","catch","error","includes","concat","confirm","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.cc492428.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst Filter = ( props ) => <div>filter shown with: <input onChange={ props.onFilter } /></div>\r\n\r\nexport default Filter\r\n","import React from 'react'\r\n\r\nconst PersonForm = ( props ) => {\r\n  return (\r\n    <form onSubmit={props.addName}>\r\n      <div>name: <input value={props.newName} onChange={props.handleNewName} /></div>\r\n      <div>number: <input value={props.newNumber} onChange={props.handleNewNumber} /></div>\r\n      <div><button type=\"submit\">add</button></div>\r\n    </form>\r\n  )\r\n}\r\n\r\nexport default PersonForm\r\n","import React from 'react'\r\n\r\nconst Person = ( {person, deletePerson} ) => {\r\n  return (\r\n    <div>\r\n      {person.name} {person.number}\r\n      <button onClick={deletePerson}>delete</button>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst Persons = ( {filterToShow, deletePersonOf } ) => {\r\n  return (\r\n    <>\r\n      { filterToShow.map( person => <Person key={person.id} person={person} deletePerson={()=>deletePersonOf(person.id)}/> )}\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Persons\r\n","import axios from 'axios'\r\n\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl)\r\n  return request.then( response => response.data )\r\n}\r\n\r\nconst create = (newPerson) => {\r\n  const request = axios.post(baseUrl, newPerson )\r\n  return request.then( response => response.data )\r\n}\r\n\r\nconst deleteOne = (id) => {\r\n  const request = axios.delete(`${baseUrl}/${id}` )\r\n  return request.then( response => response.data )\r\n}\r\n\r\nconst update = (id, newPerson) => {\r\n  const request =  axios.put(`${baseUrl}/${id}`, newPerson )\r\n  return request.then( response => response.data )\r\n}\r\n\r\nexport default { getAll, create, deleteOne, update }\r\n","import React from 'react'\r\n\r\nconst Notification = ( {message} ) => {\r\n  const messageStyle = {\r\n    background: \"lightgrey\",\r\n    fontSize: 20,\r\n    borderStyle: \"solid\",\r\n    borderRadius: 5,\r\n    padding: 10,\r\n    marginBottom: 10\r\n  }\r\n\r\n  const success = { color: \"green\" }\r\n  const fail ={ color: \"red\" }\r\n  const color = message[1] ? success :fail\r\n\r\n  const style = {\r\n    ...messageStyle,\r\n    ...color\r\n  }\r\n\r\n  if ( message[0] === null ) {\r\n    return null\r\n  }\r\n  return <div style={style}>{message}</div>\r\n}\r\n\r\nexport default Notification\r\n","import React, { useState , useEffect } from 'react'\r\nimport Filter from './components/Filter'\r\nimport PersonForm from './components/PersonForm'\r\nimport Persons from './components/Persons'\r\nimport personsService from './service/persons'\r\nimport Notification from './components/Notification'\r\n\r\nconst App = () => {\r\n  const [ persons, setPersons ] = useState([])\r\n  const [ newName, setNewName ] = useState('')\r\n  const [ newNumber, setNewNumber ] = useState('')\r\n  const [ filterToShow, setFilterToShow ] = useState( persons )\r\n  const [ message, setMessage ] = useState([null, true])\r\n\r\n  useEffect (()=>{\r\n    personsService\r\n      .getAll()\r\n      .then( response => {\r\n        setPersons( response )\r\n        setFilterToShow( response )\r\n      })\r\n  },[])\r\n\r\n  const addName = (event) => {\r\n    event.preventDefault()\r\n\r\n    const checkExistedName = ( person ) => person.name === newName\r\n\r\n    if ( persons.some(checkExistedName) ) {\r\n      window.alert(`${newName} is already added to phonebook, replace the old number with a new one?`)\r\n\r\n      const oldPerson = persons.find( checkExistedName )\r\n      const newPerson = {                                        // Do not have id\r\n        ...oldPerson,\r\n        number: newNumber\r\n      }\r\n\r\n      personsService\r\n        .update( oldPerson.id , newPerson )\r\n        .then( response => {\r\n          const newPersons = persons.map(person => person.name === response.name ? response : person )\r\n          setPersons( newPersons )\r\n          setFilterToShow( newPersons )\r\n\r\n          setNewName('')\r\n          setNewNumber('')\r\n\r\n          setMessage([`Changed nummber of ${response.name}`, true])\r\n          setTimeout(()=> setMessage([null,true]), 5000)\r\n        })\r\n        .catch( error => {\r\n            if (error.response.data.error.includes( \"Validation failed\") || error.response.data.error.includes( \"validation failed\")  ) {\r\n                setMessage([`${error.response.data.error}`, false])\r\n                setTimeout(()=> setMessage([null,false]), 5000)\r\n            } else {\r\n                setMessage([`Information of ${oldPerson.name} has removed from server`, false])\r\n                setTimeout(()=> setMessage([null,false]), 5000)\r\n\r\n                const newPersons = persons.filter(person => person.name !== oldPerson.name)\r\n                setPersons(newPersons)\r\n                setFilterToShow(newPersons)\r\n            }\r\n        })\r\n\r\n    } else {\r\n      const newPerson = {                                        // Do not have id\r\n        name: newName,\r\n        number: newNumber,\r\n      }\r\n\r\n      personsService\r\n        .create( newPerson )                                     // send information to server\r\n        .then( response => {\r\n          const newPersons = persons.concat( response )          // show information on browser\r\n          setPersons(newPersons)\r\n          setFilterToShow(newPersons)\r\n\r\n          setNewName('')\r\n          setNewNumber('')\r\n\r\n          setMessage([`Added ${response.name}`, true])\r\n          setTimeout(()=> setMessage([null,true]), 5000)\r\n        })\r\n        .catch( error => {\r\n          setMessage([`${error.response.data.error}`, false])\r\n          setTimeout(()=> setMessage([null,false]), 5000)\r\n        })\r\n    }\r\n  }\r\n\r\n  const deletePersonOf = (id) => {\r\n    const oldPerson = persons.find( person => person.id === id )\r\n    window.confirm(`Delete ${oldPerson.name} ?`)\r\n\r\n    personsService\r\n      .deleteOne(id)\r\n      .then ( response => {\r\n        const newPersons = persons.filter( person => person.id !== id )\r\n        setPersons(newPersons)\r\n        setFilterToShow(newPersons)\r\n\r\n        setMessage([`Deleted ${oldPerson.name}`, true])\r\n        setTimeout(()=> setMessage([null,true]), 5000)\r\n      })\r\n      .catch( error => {\r\n        setMessage([`Information of ${oldPerson.name} has removed from server`, false])\r\n        setTimeout(()=> setMessage([null,false]), 5000)\r\n\r\n        const newPersons = persons.filter(person => person.name !== oldPerson.name)\r\n        setPersons(newPersons)\r\n        setFilterToShow(newPersons)\r\n      })\r\n  }\r\n\r\n  const handleNewName = (event) => {\r\n    // console.log(event.target.value)\r\n    setNewName(event.target.value)\r\n  }\r\n\r\n  const handleNewNumber = (event) => {\r\n    // console.log(event.target.value)\r\n    setNewNumber(event.target.value)\r\n  }\r\n\r\n  const filter = ( event ) => {\r\n    // console.log(event.target.value)\r\n\r\n    const isFilter = event.target.value !== ''\r\n\r\n    if( !isFilter ){\r\n      const newFilterToShow = [ ...persons ]\r\n      setFilterToShow( newFilterToShow )\r\n    } else {\r\n      const str = event.target.value.toLowerCase()\r\n      const newFilterToShow = persons.filter( person => {\r\n        const name = person.name.toLowerCase()\r\n        // console.log(name,name.indexOf(str) !== -1)\r\n        return name.indexOf(str) !== -1\r\n      })\r\n      setFilterToShow( newFilterToShow )\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <Notification message={message}/>\r\n      <Filter onFilter={filter}/>\r\n      <h2>Add a new</h2>\r\n      <PersonForm newName={newName} handleNewName={handleNewName} newNumber={newNumber} handleNewNumber={handleNewNumber} addName={addName}/>\r\n      <h2>Numbers</h2>\r\n      <Persons filterToShow={filterToShow} deletePersonOf={deletePersonOf}/>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App\r\n","import ReactDOM from 'react-dom'\r\nimport App from './App'\r\n\r\nReactDOM.render(<App />, document.getElementById('root'))\r\n"],"sourceRoot":""}